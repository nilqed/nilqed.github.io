<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Section6.14</title>
  <style>
    html {
      line-height: 1.5;
      font-family: Georgia, serif;
      font-size: 20px;
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      word-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 1em;
      }
    }
    @media print {
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, 'Lucida Console', Consolas, monospace;
      font-size: 85%;
      margin: 0;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header id="title-block-header">
<h1 class="title">Section6.14</h1>
</header>
]&gt;
<a href="book-contents.xhtml">Book Contents</a><a href="section-6.13.xhtml">Previous Section 6.13 Recurrence Relations</a><a href="section-6.15.xhtml">Next Section 6.15 Functions Defined with Blocks</a> <a href="book-index.xhtml">Book Index</a>
<section id="sec-6.14">
<h2 class="sectiontitle" id="making-functions-from-objects">6.14 Making Functions from Objects</h2>
<span id="ugUserMake" class="label"></span>
<p>There are many times when you compute a complicated expression and then wish to use that expression as the body of a function. FriCAS provides an operation called <span style="font-weight: bold;"> function</span> to do <span class="index">function:from an object</span><span id="chapter-6-38"></span> this. <span class="index">function:made by function @{made by <span style="font-weight: bold;"> function</span><span id="chapter-6-39"></span>}</span> It creates a function object and places it into the workspace. There are several versions, depending on how many arguments the function has. The first argument to <span style="font-weight: bold;"> function</span> is always the expression to be converted into the function body, and the second is always the name to be used for the function. For more information, see section <a href="section-9.50.xhtml#MakeFunctionXmpPage" class="ref">MakeFunctionXmpPage</a> .</p>
<p>Start with a simple example of a polynomial in three variables.</p>
<div id="spadComm6-107" class="spadComm">
<span id="commSav6-107" class="commSav">p := -x + y^2 - z^3</span>
<div id="mathAns6-107">

</div>
</div>
<div class="math">
<table>
<tbody>
<tr class="odd">
<td>-z3+y2-x</td>
</tr>
</tbody>
</table>
</div>
<div class="returnType">
Type: Polynomial Integer
</div>
<p>To make this into a function of no arguments that simply returns the polynomial, use the two argument form of <span style="font-weight: bold;"> function</span>.</p>
<div id="spadComm6-108" class="spadComm">
<span id="commSav6-108" class="commSav">function(p,'f0)</span>
<div id="mathAns6-108">

</div>
</div>
<div class="math">
<table>
<tbody>
<tr class="odd">
<td>f0</td>
</tr>
</tbody>
</table>
</div>
<div class="returnType">
Type: Symbol
</div>
<p>To avoid possible conflicts (see below), it is a good idea to quote always this second argument.</p>
<div id="spadComm6-109" class="spadComm">
<span id="commSav6-109" class="commSav">f0</span>
<div id="mathAns6-109">

</div>
</div>
<div class="math">
<table>
<tbody>
<tr class="odd">
<td>f0()==-z3+y2-x</td>
</tr>
</tbody>
</table>
</div>
<div class="returnType">
Type: FunctionCalled f0
</div>
<p>This is what you get when you evaluate the function.</p>
<div id="spadComm6-110" class="spadComm">
<span id="commSav6-110" class="commSav">f0()</span>
<div id="mathAns6-110">

</div>
</div>
<div class="math">
<table>
<tbody>
<tr class="odd">
<td>-z3+y2-x</td>
</tr>
</tbody>
</table>
</div>
<div class="returnType">
Type: Polynomial Integer
</div>
To make a function in
x, use a version of <span style="font-weight: bold;"> function</span> that takes three arguments. The last argument is the name of the variable to use as the parameter. Typically, this variable occurs in the expression and, like the function name, you should quote it to avoid possible confusion.
<div id="spadComm6-111" class="spadComm">
<span id="commSav6-111" class="commSav">function(p,'f1,'x)</span>
<div id="mathAns6-111">

</div>
</div>
<div class="math">
<table>
<tbody>
<tr class="odd">
<td>f1</td>
</tr>
</tbody>
</table>
</div>
<div class="returnType">
Type: Symbol
</div>
<p>This is what the new function looks like.</p>
<div id="spadComm6-112" class="spadComm">
<span id="commSav6-112" class="commSav">f1</span>
<div id="mathAns6-112">

</div>
</div>
<div class="math">
<table>
<tbody>
<tr class="odd">
<td>f1x==-z3+y2-x</td>
</tr>
</tbody>
</table>
</div>
<div class="returnType">
Type: FunctionCalled f1
</div>
This is the value of <span style="font-weight: bold;"> f1</span> at
x=3. Notice that the return type of the function is <span class="teletype">Polynomial (Integer)</span>, the same as
p.
<div id="spadComm6-113" class="spadComm">
<span id="commSav6-113" class="commSav">f1(3)</span>
<div id="mathAns6-113">

</div>
</div>
<div class="verbatim">
<br />
   Compiling function f1 with type PositiveInteger -&gt; Polynomial <br />
      Integer <br />

</div>
<div class="math">
<table>
<tbody>
<tr class="odd">
<td>-z3+y2-3</td>
</tr>
</tbody>
</table>
</div>
<div class="returnType">
Type: Polynomial Integer
</div>
To use
x and
y as parameters, use the four argument form of <span style="font-weight: bold;"> function</span>.
<div id="spadComm6-114" class="spadComm">
<span id="commSav6-114" class="commSav">function(p,'f2,'x,'y)</span>
<div id="mathAns6-114">

</div>
</div>
<div class="math">
<table>
<tbody>
<tr class="odd">
<td>f2</td>
</tr>
</tbody>
</table>
</div>
<div class="returnType">
Type: Symbol
</div>
<div id="spadComm6-115" class="spadComm">
<span id="commSav6-115" class="commSav">f2</span>
<div id="mathAns6-115">

</div>
</div>
<div class="math">
<table>
<tbody>
<tr class="odd">
<td>f2(x,y)==-z3+y2-x</td>
</tr>
</tbody>
</table>
</div>
<div class="returnType">
Type: FunctionCalled f2
</div>
Evaluate
f2 at
x=3 and
y=0. The return type of <span style="font-weight: bold;"> f2</span> is still <span class="teletype">Polynomial(Integer)</span> because the variable
z is still present and not one of the parameters.
<div id="spadComm6-116" class="spadComm">
<span id="commSav6-116" class="commSav">f2(3,0)</span>
<div id="mathAns6-116">

</div>
</div>
<div class="math">
<table>
<tbody>
<tr class="odd">
<td>-z3-3</td>
</tr>
</tbody>
</table>
</div>
<div class="returnType">
Type: Polynomial Integer
</div>
<p>Finally, use all three variables as parameters. There is no five argument form of <span style="font-weight: bold;"> function</span>, so use the one with three arguments, the third argument being a list of the parameters.</p>
<div id="spadComm6-117" class="spadComm">
<span id="commSav6-117" class="commSav">function(p,'f3,['x,'y,'z])</span>
<div id="mathAns6-117">

</div>
</div>
<div class="math">
<table>
<tbody>
<tr class="odd">
<td>f3</td>
</tr>
</tbody>
</table>
</div>
<div class="returnType">
Type: Symbol
</div>
Evaluate this using the same values for
x and
y as above, but let
z be
-6. The result type of <span style="font-weight: bold;"> f3</span> is <span class="teletype">Integer</span>.
<div id="spadComm6-118" class="spadComm">
<span id="commSav6-118" class="commSav">f3</span>
<div id="mathAns6-118">

</div>
</div>
<div class="math">
<table>
<tbody>
<tr class="odd">
<td>f3(x,y,z)==-z3+y2-x</td>
</tr>
</tbody>
</table>
</div>
<div class="returnType">
Type: FunctionCalled f3
</div>
<div id="spadComm6-119" class="spadComm">
<span id="commSav6-119" class="commSav">f3(3,0,-6)</span>
<div id="mathAns6-119">

</div>
</div>
<div class="verbatim">
<br />
   Compiling function f3 with type (PositiveInteger,NonNegativeInteger,<br />
      Integer) -&gt; Integer <br />

</div>
<div class="math">
<table>
<tbody>
<tr class="odd">
<td>213</td>
</tr>
</tbody>
</table>
</div>
<div class="returnType">
Type: PositiveInteger
</div>
The four functions we have defined via
p have been undeclared. To declare a function whose body is to be generated by <span class="index">function:declaring</span><span id="chapter-6-40"></span> <span style="font-weight: bold;"> function</span>, issue the declaration <span class="italic">before</span> the function is created.
<div id="spadComm6-120" class="spadComm">
<span id="commSav6-120" class="commSav">g: (Integer, Integer) -&gt; Float</span>
<div id="mathAns6-120">

</div>
</div>
<div class="returnType">
Type: Void
</div>
<div id="spadComm6-121" class="spadComm">
<span id="commSav6-121" class="commSav">D(sin(x-y)/cos(x+y),x)</span>
<div id="mathAns6-121">

</div>
</div>
<div class="math">
<table>
<tbody>
<tr class="odd">
<td>-sin(y-x)sin(y+x)+cos(y-x)cos(y+x)cos(y+x)2</td>
</tr>
</tbody>
</table>
</div>
<div class="returnType">
Type: Expression Integer
</div>
<div id="spadComm6-122" class="spadComm">
<span id="commSav6-122" class="commSav">function(%,'g,'x,'y)</span>
<div id="mathAns6-122">

</div>
</div>
<div class="math">
<table>
<tbody>
<tr class="odd">
<td>g</td>
</tr>
</tbody>
</table>
</div>
<div class="returnType">
Type: Symbol
</div>
<div id="spadComm6-123" class="spadComm">
<span id="commSav6-123" class="commSav">g</span>
<div id="mathAns6-123">

</div>
</div>
<div class="math">
<table>
<tbody>
<tr class="odd">
<td>g(x,y)==-sin(y-x)sin(y+x)+cos(y-x)cos(y+x)cos(y+x)2</td>
</tr>
</tbody>
</table>
</div>
<div class="returnType">
Type: FunctionCalled g
</div>
It is an error to use
g without the quote in the penultimate expression since
g had been declared but did not have a value. Similarly, since it is common to overuse variable names like
x,
y, and so on, you avoid problems if you always quote the variable names for <span style="font-weight: bold;"> function</span>. In general, if
x has a value and you use
x without a quote in a call to <span style="font-weight: bold;"> function</span>, then FriCAS does not know what you are trying to do.
<p>What kind of object is allowable as the first argument to <span style="font-weight: bold;"> function</span>? Let's use the Browse facility of HyperDoc to find out. <span class="index">Browse@Browse</span><span id="chapter-6-41"></span> At the main Browse menu, enter the string <span class="teletype">function</span> and then click on <span style="font-weight: bold;"> Operations.</span> The exposed operations called <span style="font-weight: bold;"> function</span> all take an object whose type belongs to category <span class="teletype">ConvertibleTo InputForm</span>. What domains are those? Go back to the main Browse menu, erase <span class="teletype">function</span>, enter <span class="teletype">ConvertibleTo</span> in the input area, and click on <span style="font-weight: bold;"> categories</span> on the <span class="teletype">Constructors</span> line. At the bottom of the page, enter <span class="teletype">InputForm</span> in the input area following <span style="font-weight: bold;"> S =</span>. Click on <span class="teletype">Cross Reference</span> and then on <span class="teletype">Domains</span>. The list you see contains over forty domains that belong to the category <span class="teletype">ConvertibleTo InputForm</span>. Thus you can use <span style="font-weight: bold;"> function</span> for <span class="teletype">Integer</span>, <span class="teletype">Float</span>, <span class="teletype">String</span>, <span class="teletype">Complex</span>, <span class="teletype">Expression</span>, and so on.</p>
</section>
<a href="book-contents.xhtml">Book Contents</a> <a href="section-6.13.xhtml">Previous Section 6.13 Recurrence Relations</a><a href="section-6.15.xhtml">Next Section 6.15 Functions Defined with Blocks</a> <a href="book-index.xhtml">Book Index</a>
</body>
</html>
