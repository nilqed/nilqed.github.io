<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1 plus MathML 2.0//EN"
"http://www.w3.org/TR/MathML2/dtd/xhtml-math11-f.dtd" [
<!ENTITY mathml "http://www.w3.org/1998/Math/MathML">
]>

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:xlink="http://www.w3.org/1999/xlink" >


  <head>
    <title>Section9.20</title>
    <link rel="stylesheet" type="text/css" href="graphicstyle.css" />
    <script type="text/javascript" src="bookax1.js" />
  </head>

  <body>
<a href="book-contents.xhtml" style="margin-right: 10px;">Book Contents</a><a href="section-9.19.xhtml" style="margin-right: 10px;">Previous Section 9.19 Equation</a><a href="section-9.21.xhtml" style="margin-right: 10px;">Next Section 9.21 Expression</a>
<a href="book-index.xhtml">Book Index</a><div class="section"  id="sec-9.20">
<h2 class="sectiontitle">9.20  Exit</h2>


<a name="ExitXmpPage" class="label"/>


<p>A function that does not return directly to its caller has <span class="teletype">Exit</span>
as its return type.  The operation <span class="teletype">error</span> is an example of one
which does not return to its caller.  Instead, it causes a return to
top-level.
</p>




<div id="spadComm9-125" class="spadComm" >
<form id="formComm9-125" action="javascript:makeRequest('9-125');" >
<input id="comm9-125" type="text" class="command" style="width: 5em;" value="n := 0 " />
</form>
<span id="commSav9-125" class="commSav" >n := 0 </span>
<div id="mathAns9-125" ></div>
</div>


<div class="math">
<table>
<tr><td>
<math xmlns="&mathml;" mathsize="big" display="block"><mstyle><mn>0</mn></mstyle></math>
</td></tr>
</table>
</div>




<div class="returnType">
Type: NonNegativeInteger
</div>



<p>The function <span class="teletype">gasp</span> is given return type <span class="teletype">Exit</span> since it is
guaranteed never to return a value to its caller.
</p>




<div class="verbatim"><br />
gasp():&nbsp;Exit&nbsp;==<br />
&nbsp;&nbsp;&nbsp;&nbsp;free&nbsp;n<br />
&nbsp;&nbsp;&nbsp;&nbsp;n&nbsp;:=&nbsp;n&nbsp;+&nbsp;1<br />
&nbsp;&nbsp;&nbsp;&nbsp;error&nbsp;"Oh&nbsp;no!"<br />
&nbsp;<br />
Function&nbsp;declaration&nbsp;gasp&nbsp;:&nbsp;()&nbsp;-&gt;&nbsp;Exit&nbsp;has&nbsp;been&nbsp;added&nbsp;to&nbsp;workspace.<br />
<br />
</div>




<div class="returnType">
Type: Void
</div>



<p>The return type of <span class="teletype">half</span> is determined by resolving the types of
the two branches of the <span class="teletype">if</span>.
</p>




<div class="verbatim"><br />
half(k)&nbsp;==<br />
&nbsp;&nbsp;if&nbsp;odd?&nbsp;k&nbsp;then&nbsp;gasp()<br />
&nbsp;&nbsp;else&nbsp;k&nbsp;quo&nbsp;2<br />
</div>



<p>Because <span class="teletype">gasp</span> has the return type <span class="teletype">Exit</span>, the type of 
<span class="teletype">if</span> in <span class="teletype">half</span> is resolved to be <span class="teletype">Integer</span>.
</p>




<div id="spadComm9-126" class="spadComm" >
<form id="formComm9-126" action="javascript:makeRequest('9-126');" >
<input id="comm9-126" type="text" class="command" style="width: 5em;" value="half 4 " />
</form>
<span id="commSav9-126" class="commSav" >half 4 </span>
<div id="mathAns9-126" ></div>
</div>




<div class="verbatim"><br />
&nbsp;&nbsp;&nbsp;Compiling&nbsp;function&nbsp;gasp&nbsp;with&nbsp;type&nbsp;()&nbsp;-&gt;&nbsp;Exit&nbsp;<br />
&nbsp;&nbsp;&nbsp;Compiling&nbsp;function&nbsp;half&nbsp;with&nbsp;type&nbsp;PositiveInteger&nbsp;-&gt;&nbsp;Integer&nbsp;<br />
</div>


<div class="math">
<table>
<tr><td>
<math xmlns="&mathml;" mathsize="big" display="block"><mstyle><mn>2</mn></mstyle></math>
</td></tr>
</table>
</div>




<div class="returnType">
Type: PositiveInteger
</div>





<div id="spadComm9-127" class="spadComm" >
<form id="formComm9-127" action="javascript:makeRequest('9-127');" >
<input id="comm9-127" type="text" class="command" style="width: 5em;" value="half 3 " />
</form>
<span id="commSav9-127" class="commSav" >half 3 </span>
<div id="mathAns9-127" ></div>
</div>




<div class="verbatim"><br />
&nbsp;&nbsp;&nbsp;Error&nbsp;signalled&nbsp;from&nbsp;user&nbsp;code&nbsp;in&nbsp;function&nbsp;gasp:&nbsp;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Oh&nbsp;no!<br />
</div>





<div id="spadComm9-128" class="spadComm" >
<form id="formComm9-128" action="javascript:makeRequest('9-128');" >
<input id="comm9-128" type="text" class="command" style="width: 2em;" value="n " />
</form>
<span id="commSav9-128" class="commSav" >n </span>
<div id="mathAns9-128" ></div>
</div>


<div class="math">
<table>
<tr><td>
<math xmlns="&mathml;" mathsize="big" display="block"><mstyle><mn>1</mn></mstyle></math>
</td></tr>
</table>
</div>




<div class="returnType">
Type: NonNegativeInteger
</div>



<p>For functions which return no value at all, use <span class="teletype">Void</span>.  See
<a href="ugUserPage" class="ref" >ugUserPage</a>  in Section 
<a href="ugUserNumber" class="ref" >ugUserNumber</a>  and 
<a href="section-9.86.xhtml#VoidXmpPage" class="ref" >VoidXmpPage</a>  for
more information.
</p>




</div><a href="book-contents.xhtml" style="margin-right: 10px;">Book Contents</a>
<a href="section-9.19.xhtml" style="margin-right: 10px;">Previous Section 9.19 Equation</a><a href="section-9.21.xhtml" style="margin-right: 10px;">Next Section 9.21 Expression</a>
<a href="book-index.xhtml">Book Index</a></body>
</html>