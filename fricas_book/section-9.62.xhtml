<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1 plus MathML 2.0//EN"
"http://www.w3.org/TR/MathML2/dtd/xhtml-math11-f.dtd" [
<!ENTITY mathml "http://www.w3.org/1998/Math/MathML">
]>

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:xlink="http://www.w3.org/1999/xlink" >


  <head>
    <title>Section9.62</title>
    <link rel="stylesheet" type="text/css" href="graphicstyle.css" />
    <script type="text/javascript" src="bookax1.js" />
  </head>

  <body>
<a href="book-contents.xhtml" style="margin-right: 10px;">Book Contents</a><a href="section-9.61.xhtml" style="margin-right: 10px;">Previous Section 9.61 PartialFraction</a><a href="section-9.63.xhtml" style="margin-right: 10px;">Next Section 9.63 Polynomial</a>
<a href="book-index.xhtml">Book Index</a><div class="section"  id="sec-9.62">
<h2 class="sectiontitle">9.62  Permanent</h2>


<a name="PermanentXmpPage" class="label"/>


<p>The package <span class="teletype">Permanent</span> provides the function
<span class="spadfunFrom" >permanent</span><span class="index">permanent</span><a name="chapter-9-44"/><span class="index">Permanent</span><a name="chapter-9-45"/> for square matrices.  The
<span class="spadfunFrom" >permanent</span><span class="index">permanent</span><a name="chapter-9-46"/><span class="index">Permanent</span><a name="chapter-9-47"/> of a square matrix can be computed
in the same way as the determinant by expansion of minors except that
for the permanent the sign for each element is <span class="teletype">1</span>, rather than
being <span class="teletype">1</span> if the row plus column indices is positive and <span class="teletype">-1</span>
otherwise.  This function is much more difficult to compute
efficiently than the <span class="spadfunFrom" >determinant</span><span class="index">determinant</span><a name="chapter-9-48"/><span class="index">Matrix</span><a name="chapter-9-49"/>.  An example of
the use of <span class="spadfunFrom" >permanent</span><span class="index">permanent</span><a name="chapter-9-50"/><span class="index">Permanent</span><a name="chapter-9-51"/> is the calculation of
the  <math xmlns="&mathml;" mathsize="big"><mstyle><mi>n</mi></mstyle></math>-th derangement number, defined to be the number of
different possibilities for <span class="teletype">n</span> couples to dance but never with
their own spouse.
</p>


<p>Consider an <span class="teletype">n</span> by <span class="teletype">n</span> matrix with entries <span class="teletype">0</span> on the
diagonal and <span class="teletype">1</span> elsewhere.  Think of the rows as one-half of each
couple (for example, the males) and the columns the other half.  The
permanent of such a matrix gives the desired derangement number.
</p>




<div class="verbatim"><br />
kn&nbsp;n&nbsp;==<br />
&nbsp;&nbsp;r&nbsp;:&nbsp;MATRIX&nbsp;INT&nbsp;:=&nbsp;new(n,n,1)<br />
&nbsp;&nbsp;for&nbsp;i&nbsp;in&nbsp;1..n&nbsp;repeat<br />
&nbsp;&nbsp;&nbsp;&nbsp;r.i.i&nbsp;:=&nbsp;0<br />
&nbsp;&nbsp;r<br />
</div>




<div class="returnType">
Void
</div>



<p>Here are some derangement numbers, which you see grow quite fast.
</p>




<div id="spadComm9-72" class="spadComm" >
<form id="formComm9-72" action="javascript:makeRequest('9-72');" >
<input id="comm9-72" type="text" class="command" style="width: 24em;" value="permanent(kn(5) :: SQMATRIX(5,INT)) " />
</form>
<span id="commSav9-72" class="commSav" >permanent(kn(5) :: SQMATRIX(5,INT)) </span>
<div id="mathAns9-72" ></div>
</div>




<div class="verbatim"><br />
Compiling&nbsp;function&nbsp;kn&nbsp;with&nbsp;type&nbsp;PositiveInteger&nbsp;-&gt;&nbsp;Matrix&nbsp;Integer&nbsp;<br />
</div>


<div class="math">
<table>
<tr><td>
<math xmlns="&mathml;" mathsize="big" display="block"><mstyle><mn>44</mn></mstyle></math>
</td></tr>
</table>
</div>




<div class="returnType">
Type: PositiveInteger
</div>





<div id="spadComm9-73" class="spadComm" >
<form id="formComm9-73" action="javascript:makeRequest('9-73');" >
<input id="comm9-73" type="text" class="command" style="width: 36em;" value="[permanent(kn(n) :: SQMATRIX(n,INT)) for n in 1..13] " />
</form>
<span id="commSav9-73" class="commSav" >[permanent(kn(n) :: SQMATRIX(n,INT)) for n in 1..13] </span>
<div id="mathAns9-73" ></div>
</div>




<div class="verbatim"><br />
Cannot&nbsp;compile&nbsp;conversion&nbsp;for&nbsp;types&nbsp;involving&nbsp;local&nbsp;variables.&nbsp;<br />
&nbsp;&nbsp;&nbsp;In&nbsp;particular,&nbsp;could&nbsp;not&nbsp;compile&nbsp;the&nbsp;expression&nbsp;involving&nbsp;<br />
&nbsp;&nbsp;&nbsp;::&nbsp;SQMATRIX(n,INT)&nbsp;<br />
AXIOM&nbsp;will&nbsp;attempt&nbsp;to&nbsp;step&nbsp;through&nbsp;and&nbsp;interpret&nbsp;the&nbsp;code.<br />
</div>


<div class="math">
<table>
<tr><td>
<math xmlns="&mathml;" mathsize="big" display="block"><mstyle><mrow><mtable><mtr><mtd><mo>[</mo><mn>0</mn><mo>,</mo><mn>1</mn><mo>,</mo><mn>2</mn><mo>,</mo><mn>9</mn><mo>,</mo><mn>44</mn><mo>,</mo><mn>265</mn><mo>,</mo><mn>1854</mn><mo>,</mo><mn>14833</mn><mo>,</mo><mn>133496</mn><mo>,</mo></mtd></mtr><mtr><mtd><mn>1334961</mn><mo>,</mo><mn>14684570</mn><mo>,</mo><mn>176214841</mn><mo>,</mo><mn>2290792932</mn><mo>]</mo></mtd></mtr></mtable></mrow></mstyle></math>
</td></tr>
</table>
</div>




<div class="returnType">
Type: List NonNegativeInteger
</div>





</div><a href="book-contents.xhtml" style="margin-right: 10px;">Book Contents</a>
<a href="section-9.61.xhtml" style="margin-right: 10px;">Previous Section 9.61 PartialFraction</a><a href="section-9.63.xhtml" style="margin-right: 10px;">Next Section 9.63 Polynomial</a>
<a href="book-index.xhtml">Book Index</a></body>
</html>