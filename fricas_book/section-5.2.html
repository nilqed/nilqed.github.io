<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Section5.2</title>
  <style>
    html {
      line-height: 1.5;
      font-family: Georgia, serif;
      font-size: 20px;
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      word-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 1em;
      }
    }
    @media print {
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, 'Lucida Console', Consolas, monospace;
      font-size: 85%;
      margin: 0;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header id="title-block-header">
<h1 class="title">Section5.2</h1>
</header>
]&gt;
<a href="book-contents.xhtml">Book Contents</a><a href="section-5.1.xhtml">Previous Section 5.1 Immediate and Delayed Assignments</a><a href="section-5.3.xhtml">Next Section 5.3 if-then-else</a> <a href="book-index.xhtml">Book Index</a>
<section id="sec-5.2">
<h2 class="sectiontitle" id="blocks">5.2 Blocks</h2>
<span id="ugLangBlocks" class="label"></span>
<p>A <span class="italic">block</span> is a sequence of expressions evaluated in the order that they appear, except as modified by control expressions such as <span class="teletype">break</span>, <span class="index">break</span><span id="chapter-5-9"></span> <span class="teletype">return</span>, <span class="index">return</span><span id="chapter-5-10"></span> <span class="teletype">iterate</span> and <span class="index">iterate</span><span id="chapter-5-11"></span> <span class="teletype">if-then-else</span> constructions. The value of a block is the value of the expression last evaluated in the block.</p>
To leave a block early, use <span class="italic"><span class="teletype">=&gt;</span></span>. For example,
i&lt;0=&gt;x. The expression before the <span class="italic"><span class="teletype">=&gt;</span></span> must evaluate to <span class="teletype">true</span> or <span class="teletype">false</span>. The expression following the <span class="italic"><span class="teletype">=&gt;</span></span> is the return value for the block.
<p>A block can be constructed in two ways:</p>
<ol>
<li>the expressions can be separated by semicolons and the resulting expression surrounded by parentheses, and</li>
<li>the expressions can be written on succeeding lines with each line indented the same number of spaces (which must be greater than zero). <span class="index">indentation</span><span id="chapter-5-12"></span> A block entered in this form is called a <span class="italic">pile</span>.</li>
</ol>
<p>Only the first form is available if you are entering expressions directly to FriCAS. Both forms are available in <span style="font-weight: bold;">.input</span> files.</p>
<div class="boxed2">
<div class="boxed">
<p>The syntax for a simple block of expressions entered interactively is</p>
<div class="center" style="text-align: center;">
(
expression1;
expression2; ...;
expressionN )
</div>
The value returned by a block is the value of an <span class="teletype">=&gt;</span> expression, or
expressionN if no <span class="teletype">=&gt;</span> is encountered.<br />

</div>
</div>
<p>In <span style="font-weight: bold;">.input</span> files, blocks can also be written using piles. The examples throughout this book are assumed to come from <span style="font-weight: bold;">.input</span> files.</p>
In this example, we assign a rational number to
a using a block consisting of three expressions. This block is written as a pile. Each expression in the pile has the same indentation, in this case two spaces to the right of the first line.
<div class="verbatim">
<br />
a :=<br />
  i := gcd(234,672)<br />
  i := 3*i^5 - i + 1<br />
  1 / i<br />

</div>
<div class="math">
<table>
<tbody>
<tr class="odd">
<td>123323</td>
</tr>
</tbody>
</table>
</div>
<div class="returnType">
Type: Fraction Integer
</div>
<p>Here is the same block written on one line. This is how you are required to enter it at the input prompt.</p>
<div id="spadComm5-16" class="spadComm">
<span id="commSav5-16" class="commSav">a := (i := gcd(234,672); i := 3*i^5 - i + 1; 1 / i)</span>
<div id="mathAns5-16">

</div>
</div>
<div class="math">
<table>
<tbody>
<tr class="odd">
<td>123323</td>
</tr>
</tbody>
</table>
</div>
<div class="returnType">
Type: Fraction Integer
</div>
<p>Blocks can be used to put several expressions on one line. The value returned is that of the last expression.</p>
<div id="spadComm5-17" class="spadComm">
<span id="commSav5-17" class="commSav">(a := 1; b := 2; c := 3; [a,b,c])</span>
<div id="mathAns5-17">

</div>
</div>
<div class="math">
<table>
<tbody>
<tr class="odd">
<td>[1,2,3]</td>
</tr>
</tbody>
</table>
</div>
<div class="returnType">
Type: List PositiveInteger
</div>
<p>FriCAS gives you two ways of writing a block and the preferred way in an <span style="font-weight: bold;">.input</span> file is to use a pile. <span class="index">file:input</span><span id="chapter-5-13"></span> Roughly speaking, a pile is a block whose constituent expressions are indented the same amount. You begin a pile by starting a new line for the first expression, indenting it to the right of the previous line. You then enter the second expression on a new line, vertically aligning it with the first line. And so on. If you need to enter an inner pile, further indent its lines to the right of the outer pile. FriCAS knows where a pile ends. It ends when a subsequent line is indented to the left of the pile or the end of the file.</p>
<p>Blocks can be used to perform several steps before an assignment (immediate or delayed) is made.</p>
<div class="verbatim">
<br />
d :=<br />
   c := a^2 + b^2<br />
   sqrt(c * 1.3)<br />

</div>
<div class="math">
<table>
<tbody>
<tr class="odd">
<td>2.549509756796392415</td>
</tr>
</tbody>
</table>
</div>
<div class="returnType">
Type: Float
</div>
Blocks can be used in the arguments to functions. (Here
h is assigned
2.1+3.5.)
<div class="verbatim">
<br />
h := 2.1 +<br />
   1.0<br />
   3.5<br />

</div>
<div class="math">
<table>
<tbody>
<tr class="odd">
<td>5.6</td>
</tr>
</tbody>
</table>
</div>
<div class="returnType">
Type: Float
</div>
Here the second argument to <span style="font-weight: bold;">eval</span> is
x=z, where the value of
z is computed in the first line of the block starting on the second line.
<div class="verbatim">
<br />
eval(x^2 - x*y^2,<br />
     z := %pi/2.0 - exp(4.1)<br />
     x = z<br />
   )<br />

</div>
<div class="math">
<table>
<tbody>
<tr class="odd">
<td>58.769491270567072878y2+3453.853104201259382</td>
</tr>
</tbody>
</table>
</div>
<div class="returnType">
Type: Polynomial Float
</div>
<p>Blocks can be used in the clauses of <span class="teletype">if-then-else</span> expressions (see <a href="section-5.3.xhtml#ugLangIf" class="ref">ugLangIf</a> ).</p>
<div id="spadComm5-18" class="spadComm">
<span id="commSav5-18" class="commSav">if h &gt; 3.1 then 1.0 else (z := cos(h); max(z,0.5))</span>
<div id="mathAns5-18">

</div>
</div>
<div class="math">
<table>
<tbody>
<tr class="odd">
<td>1.0</td>
</tr>
</tbody>
</table>
</div>
<div class="returnType">
Type: Float
</div>
<p>This is the pile version of the last block.</p>
<div class="verbatim">
<br />
if h &gt; 3.1 then<br />
    1.0<br />
  else<br />
    z := cos(h)<br />
    max(z,0.5)<br />

</div>
<div class="math">
<table>
<tbody>
<tr class="odd">
<td>1.0</td>
</tr>
</tbody>
</table>
</div>
<div class="returnType">
Type: Float
</div>
<p>Blocks can be nested.</p>
<div id="spadComm5-19" class="spadComm">
<span id="commSav5-19" class="commSav">a := (b := factorial(12); c := (d := eulerPhi(22); factorial(d));b+c)</span>
<div id="mathAns5-19">

</div>
</div>
<div class="math">
<table>
<tbody>
<tr class="odd">
<td>482630400</td>
</tr>
</tbody>
</table>
</div>
<div class="returnType">
Type: PositiveInteger
</div>
<p>This is the pile version of the last block.</p>
<div class="verbatim">
<br />
a :=<br />
  b := factorial(12)<br />
  c :=<br />
    d := eulerPhi(22)<br />
    factorial(d)<br />
  b+c<br />

</div>
<div class="math">
<table>
<tbody>
<tr class="odd">
<td>482630400</td>
</tr>
</tbody>
</table>
</div>
<div class="returnType">
Type: PositiveInteger
</div>
Since
c+d does equal
3628855,
a has the value of
c and the last line is never evaluated.
<div class="verbatim">
<br />
a :=<br />
  c := factorial 10<br />
  d := fibonacci 10<br />
  c + d = 3628855 =&gt; c<br />
  d<br />

</div>
<div class="math">
<table>
<tbody>
<tr class="odd">
<td>3628800</td>
</tr>
</tbody>
</table>
</div>
<div class="returnType">
Type: PositiveInteger
</div>
</section>
<a href="book-contents.xhtml">Book Contents</a> <a href="section-5.1.xhtml">Previous Section 5.1 Immediate and Delayed Assignments</a><a href="section-5.3.xhtml">Next Section 5.3 if-then-else</a> <a href="book-index.xhtml">Book Index</a>
</body>
</html>
