<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Section5.5</title>
  <style>
    html {
      line-height: 1.5;
      font-family: Georgia, serif;
      font-size: 20px;
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      word-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 1em;
      }
    }
    @media print {
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, 'Lucida Console', Consolas, monospace;
      font-size: 85%;
      margin: 0;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header id="title-block-header">
<h1 class="title">Section5.5</h1>
</header>
]&gt;
<a href="book-contents.xhtml">Book Contents</a><a href="section-5.4.xhtml">Previous Section 5.4 Loops</a><a href="section-5.6.xhtml">Next Section 5.6 An Example: Streams of Primes</a> <a href="book-index.xhtml">Book Index</a>
<section id="sec-5.5">
<h2 class="sectiontitle" id="creating-lists-and-streams-with-iterators">5.5 Creating Lists and Streams with Iterators</h2>
<span id="ugLangIts" class="label"></span>
<p>All of what we did for loops in <a href="section-5.4.xhtml#ugLangLoops" class="ref">ugLangLoops</a> <span class="index">iteration</span><span id="chapter-5-52"></span> can be transformed into expressions that create lists <span class="index">list:created by iterator</span><span id="chapter-5-53"></span> and streams. <span class="index">stream:created by iterator</span><span id="chapter-5-54"></span> The <span class="teletype">repeat</span>, <span class="teletype">break</span> or <span class="teletype">iterate</span> words are not used but all the other ideas carry over. Before we give you the general rule, here are some examples which give you the idea.</p>
This creates a simple list of the integers from
1 to
10.
<div id="spadComm5-61" class="spadComm">
<span id="commSav5-61" class="commSav">list := [i for i in 1..10]</span>
<div id="mathAns5-61">

</div>
</div>
<div class="math">
<table>
<tbody>
<tr class="odd">
<td>[1,2,3,4,5,6,7,8,9,10]</td>
</tr>
</tbody>
</table>
</div>
<div class="returnType">
Type: List PositiveInteger
</div>
Create a stream of the integers greater than or equal to
1.
<div id="spadComm5-62" class="spadComm">
<span id="commSav5-62" class="commSav">stream := [i for i in 1..]</span>
<div id="mathAns5-62">

</div>
</div>
<div class="math">
<table>
<tbody>
<tr class="odd">
<td>[1,2,3,4,5,6,7,8,9,10,…]</td>
</tr>
</tbody>
</table>
</div>
<div class="returnType">
Type: Stream PositiveInteger
</div>
This is a list of the prime integers between
1 and
10, inclusive.
<div id="spadComm5-63" class="spadComm">
<span id="commSav5-63" class="commSav">[i for i in 1..10 | prime? i]</span>
<div id="mathAns5-63">

</div>
</div>
<div class="math">
<table>
<tbody>
<tr class="odd">
<td>[2,3,5,7]</td>
</tr>
</tbody>
</table>
</div>
<div class="returnType">
Type: List PositiveInteger
</div>
This is a stream of the prime integers greater than or equal to
1.
<div id="spadComm5-64" class="spadComm">
<span id="commSav5-64" class="commSav">[i for i in 1.. | prime? i]</span>
<div id="mathAns5-64">

</div>
</div>
<div class="math">
<table>
<tbody>
<tr class="odd">
<td>[2,3,5,7,11,13,17,19,23,29,…]</td>
</tr>
</tbody>
</table>
</div>
<div class="returnType">
Type: Stream PositiveInteger
</div>
This is a list of the integers between
1 and
10, inclusive, whose squares are less than
700.
<div id="spadComm5-65" class="spadComm">
<span id="commSav5-65" class="commSav">[i for i in 1..10 while i*i &lt; 700]</span>
<div id="mathAns5-65">

</div>
</div>
<div class="math">
<table>
<tbody>
<tr class="odd">
<td>[1,2,3,4,5,6,7,8,9,10]</td>
</tr>
</tbody>
</table>
</div>
<div class="returnType">
Type: List PositiveInteger
</div>
This is a stream of the integers greater than or equal to
1 whose squares are less than
700.
<div id="spadComm5-66" class="spadComm">
<span id="commSav5-66" class="commSav">[i for i in 1.. while i*i &lt; 700]</span>
<div id="mathAns5-66">

</div>
</div>
<div class="math">
<table>
<tbody>
<tr class="odd">
<td>[1,2,3,4,5,6,7,8,9,10,…]</td>
</tr>
</tbody>
</table>
</div>
<div class="returnType">
Type: Stream PositiveInteger
</div>
<p>Here is the general rule. <span class="index">collection</span><span id="chapter-5-55"></span></p>
<div class="boxed2">
<div class="boxed">
<p>The general syntax of a collection is</p>
<div class="center" style="text-align: center;">
[ <span class="italic">collectExpression</span>
iterator1
iterator2 ...
iteratorN ]
</div>
where each
iteratori is either a <span class="teletype">for</span> or a <span class="teletype">while</span> clause. The loop terminates immediately when the end test of any
iteratori succeeds or when a <span class="teletype">return</span> expression is evaluated in <span class="italic">collectExpression</span>. The value returned by the collection is either a list or a stream of elements, one for each iteration of the <span class="italic">collectExpression</span>.<br />

</div>
</div>
<p>Be careful when you use <span class="teletype">while</span> <span class="index">stream:using while @{using <span class="teletype">while</span><span id="chapter-5-56"></span>}</span> to create a stream. By default, FriCAS tries to compute and display the first ten elements of a stream. If the <span class="teletype">while</span> condition is not satisfied quickly, FriCAS can spend a long (possibly infinite) time trying to compute <span class="index">stream:number of elements computed</span><span id="chapter-5-57"></span> the elements. Use <span class="teletype">)set streams calculate</span> to change the default to something else. <span class="index">set streams calculate</span><span id="chapter-5-58"></span> This also affects the number of terms computed and displayed for power series. For the purposes of this book, we have used this system command to display fewer than ten terms.</p>
<p>Use nested iterators to create lists of <span class="index">iteration:nested</span><span id="chapter-5-59"></span> lists which can then be given as an argument to <span style="font-weight: bold;">matrix</span>.</p>
<div id="spadComm5-67" class="spadComm">
<span id="commSav5-67" class="commSav">matrix [ [x^i+j for i in 1..3] for j in 10..12]</span>
<div id="mathAns5-67">

</div>
</div>
<div class="math">
<table>
<tbody>
<tr class="odd">
<td>[x+10x2+10x3+10x+11x2+11x3+11x+12x2+12x3+12]</td>
</tr>
</tbody>
</table>
</div>
<div class="returnType">
Type: Matrix Polynomial Integer
</div>
<p>You can also create lists of streams, streams of lists and streams of streams. Here is a stream of streams.</p>
<div id="spadComm5-68" class="spadComm">
<span id="commSav5-68" class="commSav">[ [i/j for i in j+1..] for j in 1..]</span>
<div id="mathAns5-68">

</div>
</div>
<div class="math">
<table>
<tbody>
<tr class="odd">
<td>[[2,3,4,5,6,7,8,9,10,11,…],[32,2,52,3,72,4,92,5,112,6,…],.[43,53,2,73,83,3,103,113,4,133,…],[54,32,74,2,94,52,114,3,134,72,…],[65,75,85,95,2,115,125,135,145,3,…],[76,43,32,53,116,2,136,73,52,83,…],[87,97,107,117,127,137,2,157,167,177,…],[98,54,118,32,138,74,158,2,178,94,…],[109,119,43,139,149,53,169,179,2,199,…],.[1110,65,1310,75,32,85,1710,95,1910,2,…],…]</td>
</tr>
</tbody>
</table>
</div>
<div class="returnType">
Type: Stream Stream Fraction Integer
</div>
<p>You can use parallel iteration across lists and streams to create <span class="index">iteration:parallel</span><span id="chapter-5-60"></span> new lists.</p>
<div id="spadComm5-69" class="spadComm">
<span id="commSav5-69" class="commSav">[i/j for i in 3.. by 10 for j in 2..]</span>
<div id="mathAns5-69">

</div>
</div>
<div class="math">
<table>
<tbody>
<tr class="odd">
<td>[32,133,234,335,436,537,638,739,8310,9311,…]</td>
</tr>
</tbody>
</table>
</div>
<div class="returnType">
Type: Stream Fraction Integer
</div>
<p>Iteration stops if the end of a list or stream is reached.</p>
<div id="spadComm5-70" class="spadComm">
<span id="commSav5-70" class="commSav">[i^j for i in 1..7 for j in 2.. ]</span>
<div id="mathAns5-70">

</div>
</div>
<div class="math">
<table>
<tbody>
<tr class="odd">
<td>[1,8,81,1024,15625,279936,5764801]</td>
</tr>
</tbody>
</table>
</div>
<div class="returnType">
Type: Stream Integer
</div>
<p>As with loops, you can combine these modifiers to make very complicated conditions.</p>
<div id="spadComm5-71" class="spadComm">
<span id="commSav5-71" class="commSav">[ [ [i,j] for i in 10..15 | prime? i] for j in 17..22 | j = squareFreePart j]</span>
<div id="mathAns5-71">

</div>
</div>
<div class="math">
<table>
<tbody>
<tr class="odd">
<td>[[[11,17],[13,17]],[[11,19],[13,19]],[[11,21],[13,21]],[[11,22],[13,22]]]</td>
</tr>
</tbody>
</table>
</div>
<div class="returnType">
Type: List List List PositiveInteger
</div>
<p>See List (section <a href="section-9.1.xhtml#AssociationListXmpPage" class="ref">ListXmpPage</a> ) and Stream (section <a href="section-9.76.xhtml#StreamXmpPage" class="ref">StreamXmpPage</a> ) for more information on creating and manipulating lists and streams, respectively.</p>
</section>
<a href="book-contents.xhtml">Book Contents</a> <a href="section-5.4.xhtml">Previous Section 5.4 Loops</a><a href="section-5.6.xhtml">Next Section 5.6 An Example: Streams of Primes</a> <a href="book-index.xhtml">Book Index</a>
</body>
</html>
