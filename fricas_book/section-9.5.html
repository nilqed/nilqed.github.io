<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Section9.5</title>
  <style>
    html {
      line-height: 1.5;
      font-family: Georgia, serif;
      font-size: 20px;
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      word-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 1em;
      }
    }
    @media print {
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, 'Lucida Console', Consolas, monospace;
      font-size: 85%;
      margin: 0;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header id="title-block-header">
<h1 class="title">Section9.5</h1>
</header>
]&gt;
<a href="book-contents.xhtml">Book Contents</a><a href="section-9.4.xhtml">Previous Section 9.4 BinaryExpansion</a><a href="section-9.6.xhtml">Next Section 9.6 CardinalNumber</a> <a href="book-index.xhtml">Book Index</a>
<section id="sec-9.5">
<h2 class="sectiontitle" id="binarysearchtree">9.5 BinarySearchTree</h2>
<span id="BinarySearchTreeXmpPage" class="label"></span>
<p><span class="teletype">BinarySearchTree(R)</span> is the domain of binary trees with elements of type <span class="teletype">R</span>, ordered across the nodes of the tree. A non-empty binary search tree has a value of type <span class="teletype">R</span>, and <span class="teletype">right</span> and <span class="teletype">left</span> binary search subtrees. If a subtree is empty, it is displayed as a period (<span class="italic">.</span>).</p>
<p>Define a list of values to be placed across the tree. The resulting tree has <span class="teletype">8</span> at the root; all other elements are in the left subtree.</p>
<div id="spadComm9-46" class="spadComm">
<span id="commSav9-46" class="commSav">lv := [8,3,5,4,6,2,1,5,7]</span>
<div id="mathAns9-46">

</div>
</div>
<div class="math">
<table>
<tbody>
<tr class="odd">
<td>[8,3,5,4,6,2,1,5,7]</td>
</tr>
</tbody>
</table>
</div>
<div class="returnType">
Type: List PositiveInteger
</div>
<p>A convenient way to create a binary search tree is to apply the operation <span class="teletype">binarySearchTree</span> to a list of elements.</p>
<div id="spadComm9-47" class="spadComm">
<span id="commSav9-47" class="commSav">t := binarySearchTree lv</span>
<div id="mathAns9-47">

</div>
</div>
<div class="math">
<table>
<tbody>
<tr class="odd">
<td>[[[1,2,.],3,[4,5,[5,6,7]]],8,.]</td>
</tr>
</tbody>
</table>
</div>
<div class="returnType">
Type: BinarySearchTree PositiveInteger
</div>
<p>Another approach is to first create an empty binary search tree of integers.</p>
<div id="spadComm9-48" class="spadComm">
<span id="commSav9-48" class="commSav">emptybst := empty()$BSTREE(INT)</span>
<div id="mathAns9-48">

</div>
</div>
<div class="math">
<table>
<tbody>
<tr class="odd">
<td>[]</td>
</tr>
</tbody>
</table>
</div>
<div class="returnType">
Type: BinarySearchTree Integer
</div>
<p>Insert the value <span class="teletype">8</span>. This establishes <span class="teletype">8</span> as the root of the binary search tree. Values inserted later that are less than <span class="teletype">8</span> get stored in the <span class="teletype">left</span> subtree, others in the <span class="teletype">right</span> subtree.</p>
<div id="spadComm9-49" class="spadComm">
<span id="commSav9-49" class="commSav">t1 := insert!(8,emptybst)</span>
<div id="mathAns9-49">

</div>
</div>
<div class="math">
<table>
<tbody>
<tr class="odd">
<td>8</td>
</tr>
</tbody>
</table>
</div>
<div class="returnType">
Type: BinarySearchTree Integer
</div>
<p>Insert the value <span class="teletype">3</span>. This number becomes the root of the <span class="teletype">left</span> subtree of <span class="teletype">t1</span>. For optimal retrieval, it is thus important to insert the middle elements first.</p>
<div id="spadComm9-50" class="spadComm">
<span id="commSav9-50" class="commSav">insert!(3,t1)</span>
<div id="mathAns9-50">

</div>
</div>
<div class="math">
<table>
<tbody>
<tr class="odd">
<td>[3,8,.]</td>
</tr>
</tbody>
</table>
</div>
<div class="returnType">
Type: BinarySearchTree Integer
</div>
<p>We go back to the original tree <span class="teletype">t</span>. The leaves of the binary search tree are those which have empty <span class="teletype">left</span> and <span class="teletype">right</span> subtrees.</p>
<div id="spadComm9-51" class="spadComm">
<span id="commSav9-51" class="commSav">leaves t</span>
<div id="mathAns9-51">

</div>
</div>
<div class="math">
<table>
<tbody>
<tr class="odd">
<td>[1,4,5,7]</td>
</tr>
</tbody>
</table>
</div>
<div class="returnType">
Type: List PositiveInteger
</div>
<p>The operation <span class="teletype">split</span><span class="teletype">(k,t)</span> returns a <span class="index">record</span><span id="chapter-9-22"></span> containing the two subtrees: one with all elements <span class="italic">less</span> than <span class="teletype">k</span>, another with elements <span class="italic">greater</span> than <span class="teletype">k</span>.</p>
<div id="spadComm9-52" class="spadComm">
<span id="commSav9-52" class="commSav">split(3,t)</span>
<div id="mathAns9-52">

</div>
</div>
<div class="math">
<table>
<tbody>
<tr class="odd">
<td>[less=[1,2,.],greater=[[.,3,[4,5,[5,6,7]]],8,.]]</td>
</tr>
</tbody>
</table>
</div>
<div class="returnType">
Type: Record(less: BinarySearchTree PositiveInteger,greater: BinarySearchTree PositiveInteger)
</div>
<p>Define <span class="teletype">insertRoot</span> to insert new elements by creating a new node.</p>
<div id="spadComm9-53" class="spadComm">
<span id="commSav9-53" class="commSav">insertRoot: (INT,BSTREE INT) -&gt; BSTREE INT</span>
<div id="mathAns9-53">

</div>
</div>
<div class="returnType">
Type: Void
</div>
<p>The new node puts the inserted value between its <span class="italic">less</span> tree and <span class="italic">greater</span> tree.</p>
<div class="verbatim">
<br />
insertRoot(x, t) ==<br />
    a := split(x, t)<br />
    node(a.less, x, a.greater)<br />

</div>
<p>Function <span class="teletype">buildFromRoot</span> builds a binary search tree from a list of elements <span class="teletype">ls</span> and the empty tree <span class="teletype">emptybst</span>.</p>
<div id="spadComm9-54" class="spadComm">
<span id="commSav9-54" class="commSav">buildFromRoot ls == reduce(insertRoot,ls,emptybst)</span>
<div id="mathAns9-54">

</div>
</div>
<div class="returnType">
Type: Void
</div>
<p>Apply this to the reverse of the list <span class="teletype">lv</span>.</p>
<div id="spadComm9-55" class="spadComm">
<span id="commSav9-55" class="commSav">rt := buildFromRoot reverse lv</span>
<div id="mathAns9-55">

</div>
</div>
<div class="math">
<table>
<tbody>
<tr class="odd">
<td>[[[1,2,.],3,[4,5,[5,6,7]]],8,.]</td>
</tr>
</tbody>
</table>
</div>
<div class="returnType">
Type: BinarySearchTree Integer
</div>
<p>Have FriCAS check that these are equal.</p>
<div id="spadComm9-56" class="spadComm">
<span id="commSav9-56" class="commSav">(t = rt)@Boolean</span>
<div id="mathAns9-56">

</div>
</div>
<div class="math">
<table>
<tbody>
<tr class="odd">
<td>true</td>
</tr>
</tbody>
</table>
</div>
<div class="returnType">
Type: Boolean
</div>
</section>
<a href="book-contents.xhtml">Book Contents</a> <a href="section-9.4.xhtml">Previous Section 9.4 BinaryExpansion</a><a href="section-9.6.xhtml">Next Section 9.6 CardinalNumber</a> <a href="book-index.xhtml">Book Index</a>
</body>
</html>
